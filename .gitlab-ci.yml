variables:
  GIT_SUBMODULE_STRATEGY: recursive
before_script:
  - mkdir -p ~/.ssh
  - echo -e "Host *\n\tStrictHostKeyChecking no\n\n" > ~/.ssh/config
  - echo -e "$SSH_DEPLOY_KEY" > ~/.ssh/id_rsa
  - chmod 600 ~/.ssh/id_rsa
  - cd ./src
stages:
  - compile
  - cross-compile
compile:
  stage: compile
  script:
    - make lib-host
    - make host
cross-compile:
    stage: cross-compile
    script:
    - make lib-target
    - make target
after_script:
  #  - make clean