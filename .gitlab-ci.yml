before_script:
    - cd ./src
after_script:
    - cd ./src
    - make clean
stages:
  - compile
  - cross-compile
  - unit-test
  - code-coverage
  - lint
compile:
  stage: compile
  script:
    - make lib-host
    - make host
cross-compile:
    stage: cross-compile
    script:
    - make lib-target
    - make target
unit-test:
    stage: unit-test
    script:
    - make test
    - ./BusinessLayer/Tests/bl-RunTests.out
    #todo: ./ into api en de rest
code-coverage:
    stage: code-coverage
    script:
    - make lib-host
    - make host
    - bash  ./scripts/codecoverage.sh
    #- ./API/CommunicationServer/communication-host.out;./BusinessLayer/bl-host.out
    #- q
    #- gcovr -r .
lint:
  stage: lint
  script:
    - cd scripts/
    - bash lint.sh
after_script:
  #  - make clean